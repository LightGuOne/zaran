# Rime schema
# encoding: utf-8

# æ–¹æ¡ˆè¯´æ˜
schema:
  schema_id: zaran
  name: é›œç„¶
  version: "20251026"
  # icon: ico/chn.ico
  author:
    - AMZ
    - ksqsf
    - kuroame
    - light
  description: |
    è³¦æµå½¢
  dependencies:
    - wanxiang_mixedcode      # ä¸­è‹±æ··è¾“
    - rime_english            # è‹±æ–‡è¾“å…¥
    - moran_fixed             # é­”ç„¶å­—è¯
    - moran_charset           # é­”ç„¶è¿‡æ»¤å™¨


# å¼€å…³
# reset: é»˜è®¤çŠ¶æ€ã€‚æ³¨é‡Šæ‰åï¼Œåˆ‡æ¢çª—å£æ—¶ä¸ä¼šé‡ç½®åˆ°é»˜è®¤çŠ¶æ€ã€‚
# states: æ–¹æ¡ˆé€‰å•æ˜¾ç¤ºçš„åç§°ã€‚å¯ä»¥æ³¨é‡Šæ‰ï¼Œä»å¯ä»¥é€šè¿‡å¿«æ·é”®åˆ‡æ¢ã€‚
# abbrev: é»˜è®¤çš„ç¼©å†™å– states çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œabbrev å¯è‡ªå®šä¹‰ä¸€ä¸ªå­—ç¬¦
switches:
  - name: fuzhu_hint
    states: [ æ³¨é‡Šå…³,è¾…åŠ©å¼€ ]
  - name: ascii_punct     # ä¸­è‹±æ ‡ç‚¹
    states: [ Â¥, $ ]
  - name: full_shape
    states: [ åŠè§’ğŸŒ—, å…¨è§’ğŸŒ• ]          # 2024-09-05
  - name: chaifen_switch                # 2025-03-30
    states: [æ‹†å­—âŒ, æ‹†å­—âœ”] 
  - name: traditionalization
    states: [ ç®€ä½“, ç¹é«” ]               # 2024-09-05
  - name: extended_charset
    states: [ é€šç”¨, å¢å»£ ]
  - name: inflexible
    states: [ å‹•è©, å›ºè© ] # ã€Œå›ºè©ã€è¡¨ç¤ºã€Œå›ºé ‚è©ã€


# è¾“å…¥å¼•æ“
engine:
  processors:
    - key_binder                          # å¿«æ·é”®
    - lua_processor@*moran.moran_pin*pin_processor                            # PIN
    - lua_processor@*moran.moran_processor                                    # é­”ç„¶processor
    - ascii_composer                      # æŒ‰é”®æ˜¯å¦å¯åŠ¨(Ctrlé”®ã€CapsLocké”®ã€Shifté”®ç­‰)
    - recognizer                          # å¤„ç†ç¬¦åˆç‰¹å®šè§„åˆ™çš„è¾“å…¥ç ï¼Œå¦‚ç½‘å€ã€åæŸ¥
    - lua_processor@*key_binder           # ç»‘å®šæŒ‰é”®æ‰©å±•èƒ½åŠ›
    - speller                             # æ‹¼å†™è®¾å®š
    - punctuator                          # æ ‡ç‚¹ç¬¦å·
    - selector                            # é€‰å­—å¤„ç†å™¨ï¼Œå¤„ç†æ•°å­—é€‰å­—é”®ã€”å¯ä»¥æ¢æˆåˆ«çš„å“¦ã€•ã€ä¸Šã€ä¸‹å€™é€‰å®šä½ã€æ¢é¡µ
    - navigator                           # å¤„ç†è¾“å…¥æ å†…çš„å…‰æ ‡ç§»åŠ¨
    - express_editor                      # ç¼–è¾‘å™¨ï¼Œå¤„ç†ç©ºæ ¼ã€å›è½¦ä¸Šå±ã€å›é€€é”®
  segmentors:
    - ascii_segmentor                     # æ ‡è¯†è‹±æ–‡æ®µè½ã€”è­¬å¦‚åœ¨è‹±æ–‡æ¨¡å¼ä¸‹ã€•å­—æ¯ç›´æ¥ä¸Šå±›
    - matcher                             # é…åˆ recognizer æ ‡è¯†ç¬¦åˆç‰¹å®šè§„åˆ™çš„æ®µè½ï¼Œå¦‚ç½‘å€ã€åæŸ¥ç­‰ï¼ŒåŠ ä¸Šç‰¹å®š tag
    - matcher@recognizer_secondary        # è‹±æ–‡æ­£åˆ™
    - abc_segmentor                       # æ ‡è¯†å¸¸è§„çš„æ–‡å­—æ®µè½ï¼ŒåŠ ä¸Š abc è¿™ä¸ª tag
    - punct_segmentor                     # æ ‡è¯†ç¬¦å·æ®µè½ã€”é”®å…¥æ ‡ç‚¹ç¬¦å·ç”¨ã€•åŠ ä¸Š punct è¿™ä¸ª tag
    - fallback_segmentor                  # æ ‡è¯†å…¶ä»–æœªæ ‡è¯†æ®µè½ï¼Œå¿…é¡»æ”¾åœ¨æœ€åå¸®åŠ©tagæ¨¡å¼åˆ‡æ¢åå›é€€é‡æ–°å¤„ç†
  translators:
    - punct_translator                    # é…åˆ punct_segmentor è½¬æ¢æ ‡ç‚¹ç¬¦å·
    - table_translator@wanxiang_mixedcode # ä¸­è‹±ç­‰æ··åˆè¯æ±‡è¡¨å¯¼å…¥
    - table_translator@rime_english       # è‹±æ–‡è¯å…¸
    - lua_translator@*mylua.pseudo_moran@with_reorder                         # ä¼ªÂ·é­”ç„¶ç¿»è­¯å™¨
    - table_translator@custom_phrase      # è‡ªå®šä¹‰çŸ­è¯­
    - lua_translator@*moran.moran_pin*panacea_translator                      # PIN
  filters:
    - lua_filter@*moran.moran_charset_filter                                  # é­”ç„¶å­—ç¬¦é›†è¿‡æ»¤
    - lua_filter@*moran.moran_pin*pin_filter                                  # PIN
    - lua_filter@*moran.moran_reorder_filter                                  # é­”ç„¶æ»¤é•œ
    - lua_filter@*moran.moran_ijrq_filter                                     # é­”ç„¶å‡ºç®€è®©å…¨
    - lua_filter@*mylua.simple_comment    #  ç®€æ˜“æ³¨é‡Š
    - lua_filter@*moran.moran_hint_filter                                     # é­”ç„¶ç®€è¯æç¤º
    - lua_filter@*mylua.add_words         # è‹±æ–‡é€ è¯
    - simplifier@traditionalize           # ç®€ç¹åˆ‡æ¢
    - uniquifier                          # å»é‡


# å›ºè¯ç¿»è¯‘å™¨
translator:
  dictionary: rime_wanxiang # æŒ‚è½½è¯åº“
  prism: moran              # å¤šæ–¹æ¡ˆå…±ç”¨ä¸€ä¸ªè¯åº“æ—¶ï¼Œä¸ºé¿å…å†²çªï¼Œéœ€è¦ç”¨ prism æŒ‡å®šä¸€ä¸ªåå­—ã€‚
  initial_quality: 5        # åˆå§‹æƒé‡
  spelling_hints: 20        # å°†æ³¨é‡Šä»¥è¯å…¸å­—ç¬¦ä¸²å½¢å¼å®Œå…¨æš´éœ²
  contextual_suggestions: false  # è¯­è¨€æ¨¡å‹é¢„æµ‹è¯ç»„æƒé‡
  core_word_length: 4       # >0 å¯ç”¨ï¼ŒæŒ‰æ®µå­¦è¯ + ç›¸é‚»æ®µæ‹¼æ¥
  max_word_length: 7        # >0 å¯ç”¨ï¼Œè¿‡é•¿çŸ­è¯­ä¸è®°æ•´è¯ï¼ŒåªåŠ å…ƒç´ æƒé‡
  enable_completion: true   # è¡¥å…¨æç¤º
  enable_user_dict: false   # ç”¨æˆ·è¯å…¸
  max_homographs: 5         # æœ€å¤§åŒå½¢ç°‡é•¿åº¦
  max_homophones: 7         # æœ€å¤§åŒéŸ³ç°‡é•¿åº¦


# åŠ¨è¯ç¿»è¯‘å™¨
frequency:
  dictionary: rime_wanxiang # æŒ‚è½½è¯åº“
  prism: moran              # å¤šæ–¹æ¡ˆå…±ç”¨ä¸€ä¸ªè¯åº“æ—¶ï¼Œä¸ºé¿å…å†²çªï¼Œéœ€è¦ç”¨ prism æŒ‡å®šä¸€ä¸ªåå­—ã€‚
  initial_quality: 5        # åˆå§‹æƒé‡
  spelling_hints: 20        # å°†æ³¨é‡Šä»¥è¯å…¸å­—ç¬¦ä¸²å½¢å¼å®Œå…¨æš´éœ²
  contextual_suggestions: false  # è¯­è¨€æ¨¡å‹é¢„æµ‹è¯ç»„æƒé‡
  core_word_length: 4       # >0 å¯ç”¨ï¼ŒæŒ‰æ®µå­¦è¯ + ç›¸é‚»æ®µæ‹¼æ¥
  max_word_length: 7        # >0 å¯ç”¨ï¼Œè¿‡é•¿çŸ­è¯­ä¸è®°æ•´è¯ï¼ŒåªåŠ å…ƒç´ æƒé‡
  enable_completion: true   # è¡¥å…¨æç¤º
  max_homographs: 5         # æœ€å¤§åŒå½¢ç°‡é•¿åº¦
  max_homophones: 10        # æœ€å¤§åŒéŸ³ç°‡é•¿åº¦


# å­—è¯ç¿»è¯‘å™¨
fixed:                      # å›ºé ‚è¼¸å…¥æ¨¡å¼è¨­ç½®ï¼Œåœ¨ top_translator ä¸­è¢«èª¿ç”¨
  dictionary: moran_fixed_simp
  initial_quality: 1000     # åˆå§‹æƒé‡
  enable_completion: false  # å¯ç”¨å€™é€‰è¯è¡¥å…¨
  enable_sentence: false    # ç¦æ­¢é€ å¥
  enable_user_dict: false   # ç¦ç”¨ç”¨æˆ·è¯å…¸
  enable_encoder: false     # æ˜¯å¦å¼€å¯è‡ªåŠ¨é€ è¯
  encode_commit_history: true # æ˜¯å¦å¯¹å·²ä¸Šå±›è¯è‡ªåŠ¨æˆè¯


# æ¬¡ç¿»è¯‘å™¨ è‹±æ–‡
rime_english:
  dictionary: rime_english  # æŒ‚è½½è¯åº“
  tag: english              # librime<=1.11 è«‹åœ¨ custom ä¸­ç½®ç©º
  initial_quality: 1.2      # åˆå§‹æƒé‡
  enable_sentence: false    # ç¦æ­¢é€ å¥
  user_dict: rime_english
  comment_format:           # è‡ªå®šä¹‰æç¤ºç 
    - xform/.*//            # æ¸…ç©ºæç¤ºç 


# ä¸­è‹±æ··è¾“
wanxiang_mixedcode:
  dictionary: wanxiang_mixedcode     # æŒ‚è½½è¯åº“
  tag: english              # librime<=1.11 è«‹åœ¨ custom ä¸­ç½®ç©º
  initial_quality: 1.1      # åˆå§‹æƒé‡
  enable_sentence: false    # ç¦æ­¢é€ å¥
  enable_user_dict: false   # ç¦ç”¨ç”¨æˆ·è¯å…¸
  comment_format:           # è‡ªå®šä¹‰æç¤ºç 
    - xform/.*//            # æ¸…ç©ºæç¤ºç 


# è‡ªå®šä¹‰çŸ­è¯­
custom_phrase:
  dictionary: ""            # æŒ‚è½½è¯åº“ 
  initial_quality: 99       # åˆå§‹æƒé‡
  user_dict: mydict         
  db_class: stabledb        # åªè¯»æ•°æ®åº“ï¼Œæ— æ³•åŠ¨æ€è°ƒé¢‘ï¼›è®¾ä¸º tabledb å¯ä»¥åŠ¨æ€è°ƒé¢‘
  enable_completion: false  # è¡¥å…¨æç¤º
  enable_sentence: false    # ç¦æ­¢é€ å¥


# ç®€ç¹åˆ‡æ¢
traditionalize:
  option_name: traditionalization
  opencc_config: s2t.json   # s2t.json | s2hk.json | s2tw.json | s2twp.json
  tips: char                # è½¬æ¢æç¤º: all éƒ½æ˜¾ç¤º | char ä»…å•å­—æ˜¾ç¤º | none ä¸æ˜¾ç¤ºã€‚
  tags: [ abc, number, gregorian_to_lunar ]  # é™åˆ¶åœ¨å¯¹åº” tagï¼Œä¸å¯¹å…¶ä»–å¦‚åæŸ¥çš„å†…å®¹åšç®€ç¹è½¬æ¢


# æ ‡ç‚¹ç¬¦å·
punctuator:
  digit_separator_action: "commit"
  __include: default:/punctuator


# å¤„ç†ç¬¦åˆç‰¹å®šè§„åˆ™çš„è¾“å…¥ç ï¼Œå¦‚ç½‘å€ã€åæŸ¥
recognizer:
  import_preset: default    # ä» default.yaml ç»§æ‰¿é€šç”¨çš„
  patterns:  # å†å¢åŠ æ–¹æ¡ˆä¸“æœ‰çš„ï¼š


recognizer_secondary:
  patterns:
    # 1. è¼¸å…¥é•·åº¦é”åˆ° 4 å¾Œé–‹å§‹è¼¸å‡ºè‹±èª *æˆ–* å‰ 4 å­—æ¯ä¸­æœ‰å¤§å¯«å­—æ¯
    english: '(^[A-Za-z]{4}[A-Za-z]*)|(^[A-Z][A-Za-z]*)|(^[a-z][A-Z][a-zA-Z]*)|(^[a-z][a-z][A-Z][a-zA-Z]*)'
    # 2. å°ä»»ä½•è¼¸å…¥éƒ½è¼¸å‡ºè‹±èª
    # english: '.*'
    # 3. è¼¸å…¥é•·åº¦é”åˆ° 4 å¾Œé–‹å§‹è¼¸å‡ºè‹±èª
    # english: '^[A-Za-z]{4}[A-Za-z]*'


# ä» default ç»§æ‰¿å¿«æ·é”®
key_binder:
  import_preset: default    # ä» default.yaml ç»§æ‰¿é€šç”¨çš„
  bindings: 


# æ‹¼å†™è®¾å®š
speller:
  # å¦‚æœä¸æƒ³è®©ä»€ä¹ˆæ ‡ç‚¹ç›´æ¥ä¸Šå±ï¼Œå¯ä»¥åŠ åœ¨ alphabetï¼Œæˆ–è€…ç¼–è¾‘æ ‡ç‚¹ç¬¦å·ä¸ºä¸¤ä¸ªåŠä»¥ä¸Šçš„æ˜ å°„
  alphabet: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA`/
  # initials å®šä¹‰ä»…ä½œä¸ºå§‹ç çš„æŒ‰é”®ï¼Œæ’é™¤ ` è®©å•ä¸ªçš„ ` å¯ä»¥ç›´æ¥ä¸Šå±
  initials: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA
  delimiter: " '"  # ç¬¬ä¸€ä½<ç©ºæ ¼>æ˜¯æ‹¼éŸ³ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼›ç¬¬äºŒä½<'>è¡¨ç¤ºå¯ä»¥æ‰‹åŠ¨è¾“å…¥å•å¼•å·æ¥åˆ†å‰²æ‹¼éŸ³ã€‚
  auto_select: true
  auto_select_pattern: ^(\w+)/
  algebra:
    __include: zaran_algebra:/pro/è‡ªç„¶ç 


grammar:
  language: wanxiang-lts-zh-hans
  collocation_max_length: 6
  collocation_min_length: 3
  collocation_penalty: -10
  non_collocation_penalty: -20
  weak_collocation_penalty: -45
  rear_penalty: -12


moran:
  quick_code_indicator: "ğŸ—²"        # ç®€ç æ ‡è¯†ç¬¦
  enable_word_filter: false         # è¯è¾…åŠŸèƒ½
  word_filter_match_indicator: {}   # è¯è¾…å‘½ä¸­æç¤ºè¯ 
  inject_fixed_chars: false          # å¯ç”¨å•å­—æ³¨å…¥ æ˜¯å¦è¾“å‡ºç®€ç è¡¨å•å­—ï¼ˆå¦‚ jwrg æ¬¡é€‰ã€Œä½³ã€ï¼‰
  inject_fixed_words: true          # å¯ç”¨é•¿è¯æ³¨å…¥ æ˜¯å¦è¾“å‡ºç®€ç è¡¨è¯è¯­ï¼ˆå¦‚ lmsd æ¬¡é€‰ã€Œä¸¤é¢ä¸‰åˆ€ã€ï¼‰
  # ã€Œå‡ºç°¡è®“å…¨ã€ç›¸é—œè¨­ç½®
  ijrq:
    enable: true                    # å‡ºç®€è®©å…¨å¼€å…³
    show_hint: true                 # æ˜¾ç¤ºç®€ç æç¤º
    enable_word: true               # è©èªç´šã€Œè®“å…¨ã€ï¼Œå°äºŒã€ä¸‰ã€å››å­—è©æœ‰æ•ˆ
    enable_word_delay: 200          # å»¶é²è§¸ç™¼è©èªç´šè®“å…¨æ•ˆæœ,ä¸€èˆ¬çˆ² 200 *æ¯«ç§’* ä¸Šä¸‹ï¼ˆåƒ… librime >= 1.14 å¯ç”¨ï¼‰
    enable_word_defer: 2            # å»¶é²å€™é¸å€‹æ•¸ã€‚å¿…é ˆæ˜¯å¤§æ–¼ç­‰æ–¼ 1 çš„æ•´æ•¸æ‰æœ‰æ•ˆæœã€‚
    suffix: "/"                     # è®©å…¨åç¼€
  # moran_hint_filter çš„ç›¸å…³è®¾ç½®
  enable_aux_hint: false            # è¾…åŠ©ç æç¤ºï¼ˆæ— ç”¨ï¼‰
  enable_quick_code_hint: true      # ç°¡å¿«ç¢¼æç¤ºï¼ˆåŒ…æ‹¬å­—å’Œè©ï¼‰
  quick_code_hint_indicator: ""     # ç®€å¿«ç æç¤ºç¬¦å·ï¼ˆé»˜èªå€¼ null ä½¿ç”¨quick_code_indicatoræç¤ºï¼‰
  quick_code_hint_skip_chars: true  # å–æ¶ˆå–®å­—çš„ç°¡å¿«ç¢¼æç¤º
  # (ä»…*åŠ¨è¯æ¨¡å¼*) è¾“å‡ºä¼˜å…ˆçº§
  inject_prioritize: "word"         # char: ä¼˜å…ˆå•å­—, word: ä¼˜å…ˆè¯ç»„ï¼Œå…¶ä»–å€¼æŒ‰ç è¡¨é¡ºåº
  # ã€ŒPINã€ç›¸é—œè¨­ç½®
  pin:
    enable: true                    # å¯ç”¨ç½®é¡¶åŠŸèƒ½
    indicator: "ğŸ“Œ"                 # ç½®é¡¶æ ‡è¯†
    panacea:
      infix: "//"                   # é€ è¯åˆ†éš”ç¬¦
      prompt: "ã€”åŠ è¯ã€•"            # é€ è¯æç¤º
      freestyle: false              # å¯ç”¨è‡ªç”±æ¨¡å¼
  # ã€Œé€šç”¨ã€å­—ç¬¦é›†è¨­ç½® ï¼ˆä¸å½±éŸ¿ã€Œå¢å»£ã€ï¼šå¢å»£ä»é¡¯ç¤º*æ‰€æœ‰*å­—ç¬¦ï¼‰
  charset: simp             # both: å…è¨±ç¹é«”å’Œç°¡é«”åŒæ™‚é¡¯ç¤º | simp: åªé¡¯ç¤ºç°¡åŒ–å­— | trad: åªé¡¯ç¤ºç¹é«”å­—
  #ç•¥ç   moran_processor.lua â†’ shorthands ä¿®æ”¹
  shorthands: false   
