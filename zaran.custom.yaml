patch:
  style/+: 
  schema/dependencies/+:
    - wanxiang_reverse               # åæŸ¥
    - chaifen
    # - kagiroi


  engine/processors/@before 2: lua_processor@*kagiroi/kagiroi_kana_speller  # éœ€è¦åœ¨key_binderåé¢
  engine/segmentors/@before 2: lua_segmentor@*mylua.paired_punct    #æˆå¯¹ç¬¦å·
  engine/segmentors/@before 3: affix_segmentor@kagiroi                      # éœ€è¦åœ¨abc_segmentorå‰é¢
  engine/segmentors/@before 4: affix_segmentor@reverse_wanxiang
  engine/translators/+:
    - reverse_lookup_translator@reverse_wanxiang   # åæŸ¥
    - lua_translator@*mylua.mixed_V
    - lua_translator@*unicode             # Unicode
    - lua_translator@*kagiroi/kagiroi_translator
  # engine/filters/@before 1: lua_filter@*kagiroi/kagiroi_aux_filter  # è¾…ç­›
  # engine/filters/@before 7: lua_filter@*mylua/info_comment          # è°ƒè¯•ç”¨


  key_binder/bindings/+:
    # - { match: "^V.+", accept: "KP_Enter", send_sequence: '{space}' }           # ç©ºæ ¼ä¸Šå±
    - { match: "^[a-z]{2,3}", accept: "Shift+Shift_L", send_sequence: 3 }           # æœ‰å€™é€‰æ—¶ä¸‰é€‰
    # - { when: composing, accept: "space", send_sequence: '{Return}l/' } 
    - { when: has_menu, accept: Control+Shift+G, toggle: inflexible }        # é­”ç„¶å›ºè¯å¼€å…³
    - { when: composing, accept: "Control+g", toggle: extended_charset }            # å¤§å°å­—ç¬¦é›†
    - { when: has_menu, accept: "Control+s", toggle: tone_display }                 # æ‹¼éŸ³æ˜¾ç¤º
    - { when: has_menu, accept: "Control+b", toggle: fuzhu_hint }                 # æ‹¼éŸ³æ˜¾ç¤º
    - { when: has_menu, accept: "Control+Shift+B", toggle: chaifen_switch }               # è¡¥å…¨ä¿¡æ¯å¼€å…³


  recognizer/patterns/+:
    reverse_wanxiang: "^olf[A-Za-z]*$"  # åæŸ¥å…¥å£
    calculator: "^V.*$"                 # è®¡ç®—å™¨åŠŸèƒ½å¼•å¯¼
    unicode: "^U[a-f0-9]+"              # Unicode
    kagiroi: '^(?:ok|\xE3\x81[\x81-\xBF]|\xE3\x82[\x80-\x9F]|\xE3\x83\xBC)(?:\xE3\x81[\x81-\xBF]|\xE3\x82[\x80-\x9F]|\xE3\x83\xBC|[a-z\-;])*$'


  reverse_wanxiang:
    tag: reverse_wanxiang
    dictionary: wanxiang_reverse
    db_class: stabledb
    enable_completion: true  # å¯ç”¨å€™é€‰è¯è¡¥å…¨
    prefix: "olf"  # åæŸ¥å‰ç¼€ï¼ˆåæŸ¥æ—¶å‰ç¼€ä¼šæ¶ˆå¤±å½±å“æ‰“è‹±æ–‡æ‰€ä»¥è®¾å®šä¸ºä¸¤ä¸ªå­—æ¯ï¼Œæˆ–å¯æ”¹æˆä¸€ä¸ªéå­—æ¯ç¬¦å·ï¼‰
    enable_user_dict: false  # ç¦ç”¨ç”¨æˆ·è¯å…¸ï¼Œæ˜¯å¦å¼€å¯è‡ªåŠ¨è°ƒé¢‘
    tips: ã€”åæŸ¥ã€•
    preedit_format:
      - xform/^o(lf|bh|cj|vy|hm)//


  kagiroi:
    prefix: ok
    tips: ã€”ã‚«ã‚®ãƒ­ã‚¤ã€•
    tag: kagiroi
    layout: romaji
    speller:
      __include: kagiroi:/alphabet/3_dan
    translator:
      input_mapping:
        - xform/^(.*)n$/$1ã‚“$/


  simple_comment:                     # è¶…çº§æ³¨é‡Šæ¨¡å—ï¼Œå­é¡¹é…ç½® true å¼€å¯ï¼Œfalse å…³é—­
    candidate_length: 1               # å€™é€‰è¯è¾…åŠ©ç æé†’çš„ç”Ÿæ•ˆé•¿åº¦ï¼Œ0ä¸ºå…³é—­  ä½†åŒæ—¶æ¸…ç©ºå…¶å®ƒï¼Œåº”å½“ä½¿ç”¨ä¸Šé¢å¼€å…³æ¥å¤„ç†
    corrector_type: "comment"         # æ¢ä¸€ç§æ˜¾ç¤ºç±»å‹ï¼Œæ¯”å¦‚"({comment})" 


  paired_punct:
    pattern: '^([aswdf])`'
    defer:
      - "ï¼Œ"
      - "ã€"
      - "|"
    dict:
      a: ['ã€Š','ã€‹']
      w: ['ï¼ˆ','ï¼‰']
      s: ['ã€Œ','ã€']
      d: ['ã€','ã€']
      f: ['"','"']


  # æ‰‹æœºä¸“ç”¨
  # moran/quick_code_indicator: "âš¡"
  # switches:
  #   - options: [ comment_off, fuzhu_hint, tone_hint ]
  #     states: [ æ³¨é‡Šå…³, è¾…åŠ©å¼€, è¯»éŸ³å¼€ ]
  #   - name: ascii_punct  # ä¸­è‹±æ ‡ç‚¹
  #     states: [ Â¥, $ ]
  #     reset: 1
  #   - name: full_shape
  #     states: [ åŠè§’ğŸŒ—, å…¨è§’ğŸŒ• ]
  #   - name: chaifen_switch
  #     states: [æ‹†å­—âŒ, æ‹†å­—âœ”] 
  #   - name: traditionalization
  #     states: [ ç®€ä½“, ç¹é«” ]
  #   - name: extended_charset
  #     states: [ é€šç”¨, å¢å»£ ]
  #   - name: inflexible
  #     states: [ å‹•è©, å›ºè© ]
